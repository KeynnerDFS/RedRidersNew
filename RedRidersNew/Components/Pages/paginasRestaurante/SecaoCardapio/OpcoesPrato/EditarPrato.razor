@page "/restaurante/editar-prato/{id:int}"
@using RedRidersNew.Components.Layout.LayoutRestaurante
@layout MainLayoutRestaurante

<PageTitle>Editar Prato</PageTitle>

<div class="container py-4">
    <NavBarCardapio />

    <EditForm Model="@prato" OnValidSubmit="SalvarEdicao" class="card p-4 mb-4 shadow-sm">

        <DataAnnotationsValidator />
        <ValidationSummary />

        <h4 class="mb-3 fw-semibold border-bottom pb-2">Editar Prato</h4>

        <div class="row g-3">

            <!-- Nome -->
            <div class="col-md-6">
                <label class="form-label fw-semibold">Nome do prato</label>
                <InputText class="form-control" @bind-Value="prato.NomePrato" />
            </div>

            <!-- Categoria -->
            <div class="col-md-3">
                <label class="form-label fw-semibold">Categoria</label>
                <InputText class="form-control" @bind-Value="prato.CategoriaPrato" />
            </div>

            <!-- peso -->
            <div class="col-md-3">
                <label class="form-label fw-semibold">Peso / Litros</label>
                <InputText class="form-control" @bind-Value="prato.QuantidadePrato" />
            </div>

            <!-- Descrição -->
            <div class="col-12">
                <label class="form-label fw-semibold">Descrição</label>
                <InputTextArea class="form-control" rows="3" @bind-Value="prato.DescricaoPrato" />
            </div>

            <!-- Preço -->
            <div class="col-md-3">
                <label class="form-label fw-semibold">Preço</label>
                <InputNumber class="form-control" @bind-Value="prato.PrecoPrato" />
            </div>

            <!-- Tamanho -->
            <div class="col-md-3">
                <label class="form-label fw-semibold">Tamanho / Porção</label>
                <InputText class="form-control" @bind-Value="prato.TamanhoPrato" />
            </div>

            <!-- Imagem -->
            <div class="col-md-6">
                <label class="form-label fw-semibold">URL da Imagem</label>
                <InputText class="form-control" @bind-Value="prato.RotaImgPrato" />
            </div>

        </div>

        <div class="mt-4 text-end">
            <button class="btn btn-soft-primary px-4">Salvar</button>
        </div>

    </EditForm>

</div>

@code {

    [Parameter]
    public int id { get; set; }

    private Prato prato = new Prato();

    protected override void OnInitialized()
    {
        // TODO: Buscar o prato por id no banco / API
        // (dados de exemplo apenas)
        prato = new Prato
        {
            NomePrato = "Exemplo",
            CategoriaPrato = "Categoria X",
            QuantidadePrato = "500g",
            DescricaoPrato = "Descrição exemplo",
            PrecoPrato = 29.90m,
            TamanhoPrato = "Médio",
            RotaImgPrato = "https://..."
        };
    }

    private void SalvarEdicao()
    {
        // TODO: salvar no banco / API
        Console.WriteLine("Prato editado:");
        Console.WriteLine(prato.NomePrato);
    }

    public class Prato
    {
        public string NomePrato { get; set; }
        public string DescricaoPrato { get; set; }
        public decimal PrecoPrato { get; set; }
        public string RotaImgPrato { get; set; }
        public string CategoriaPrato { get; set; }
        public string TamanhoPrato { get; set; }
        public string QuantidadePrato { get; set; }
    }
}
